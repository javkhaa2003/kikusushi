if (self.CavalryLogger) { CavalryLogger.start_js(["GuhwW"]); }

__d('CommercialBreakCallToActionAttachment.react',['cx','React','TrackingNodes','XUIText.react'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';if(!this.props.link||!this.props.linkCaption&&!this.props.linkTitle)return null;var l=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.GENERIC_CALL_TO_ACTION_BUTTON);return c('React').createElement('div',{className:"_1y4d",'data-ft':l},c('React').createElement(c('XUIText.react'),{className:"_1y4e"},this.props.linkTitle),c('React').createElement(c('XUIText.react'),{className:"_1y4g"},this.props.linkCaption),c('React').createElement('a',{className:"_275_",href:this.props.link,target:'_blank'}));};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d("CallToActionTypes",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({OPEN_LINK:"OPEN_LINK",LIKE_PAGE:"LIKE_PAGE",SHOP_NOW:"SHOP_NOW",PLAY_GAME:"PLAY_GAME",INSTALL_APP:"INSTALL_APP",USE_APP:"USE_APP",CALL:"CALL",CALL_ME:"CALL_ME",GET_MOBILE_APP:"GET_MOBILE_APP",INSTALL_MOBILE_APP:"INSTALL_MOBILE_APP",INSTALL_FREE_MOBILE_APP:"INSTALL_FREE_MOBILE_APP",USE_MOBILE_APP:"USE_MOBILE_APP",MOBILE_DOWNLOAD:"MOBILE_DOWNLOAD",BOOK_TRAVEL:"BOOK_TRAVEL",LISTEN_MUSIC:"LISTEN_MUSIC",WATCH_VIDEO:"WATCH_VIDEO",LEARN_MORE:"LEARN_MORE",SIGN_UP:"SIGN_UP",DOWNLOAD:"DOWNLOAD",WATCH_MORE:"WATCH_MORE",NO_BUTTON:"NO_BUTTON",VISIT_PAGES_FEED:"VISIT_PAGES_FEED",MISSED_CALL:"MISSED_CALL",CALL_NOW:"CALL_NOW",APPLY_NOW:"APPLY_NOW",BUY_NOW:"BUY_NOW",GET_OFFER:"GET_OFFER",GET_OFFER_VIEW:"GET_OFFER_VIEW",BUY_TICKETS:"BUY_TICKETS",UPDATE_APP:"UPDATE_APP",GET_DIRECTIONS:"GET_DIRECTIONS",BUY:"BUY",SEE_DETAILS:"SEE_DETAILS",MESSAGE_PAGE:"MESSAGE_PAGE",MESSAGE_USER:"MESSAGE_USER",DONATE:"DONATE",SUBSCRIBE:"SUBSCRIBE",SAY_THANKS:"SAY_THANKS",SELL_NOW:"SELL_NOW",SHARE:"SHARE",DONATE_NOW:"DONATE_NOW",GET_QUOTE:"GET_QUOTE",CONTACT_US:"CONTACT_US",ORDER_NOW:"ORDER_NOW",START_ORDER:"START_ORDER",ADD_TO_CART:"ADD_TO_CART",VIDEO_ANNOTATION:"VIDEO_ANNOTATION",MOMENTS:"MOMENTS",RECORD_NOW:"RECORD_NOW",VOTE_NOW:"VOTE_NOW",GIVE_FREE_RIDES:"GIVE_FREE_RIDES",REGISTER_NOW:"REGISTER_NOW",OPEN_MESSENGER_EXT:"OPEN_MESSENGER_EXT",CIVIC_ACTION:"CIVIC_ACTION",SEND_INVITES:"SEND_INVITES",SAVE:"SAVE",REQUEST_TIME:"REQUEST_TIME",SEE_MENU:"SEE_MENU",EMAIL_NOW:"EMAIL_NOW",PAY_OR_REQUEST:"PAY_OR_REQUEST",SEARCH:"SEARCH",UNLIKE_PAGE:"UNLIKE_PAGE",BET_NOW:"BET_NOW",OPEN_MOVIES:"OPEN_MOVIES",EVENT_RSVP:"EVENT_RSVP",GO_LIVE:"GO_LIVE",SEND_TIP:"SEND_TIP",WHATSAPP_MESSAGE:"WHATSAPP_MESSAGE"});}),null);
__d("CommercialBreakCallToActionLocation",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({CONTEXT_CARD:"context_card",INLINE:"inline"});}),null);
__d('CommercialBreakCallToActionButton.react',['cx','fbt','CallToActionTypes','CommercialBreakCallToActionLocation','React','TrackingNodes','XUIButton.react'],(function a(b,c,d,e,f,g,h,i){var j,k;j=babelHelpers.inherits(l,c('React').Component);k=j&&j.prototype;l.prototype.render=function(){'use strict';if(this.props.callToActionType===c('CallToActionTypes').NO_BUTTON)return null;var m=c('TrackingNodes').getTrackingInfo(c('TrackingNodes').types.GENERIC_CALL_TO_ACTION_BUTTON);return c('React').createElement('div',{className:this.props.buttonLocation===c('CommercialBreakCallToActionLocation').CONTEXT_CARD?"_44mj":''},c('React').createElement(c('XUIButton.react'),{className:this.props.buttonLocation===c('CommercialBreakCallToActionLocation').INLINE?"_44mp":'',label:this.$CommercialBreakCallToActionButton1(),href:{url:this.props.link},target:'_blank','data-ft':m}));};l.prototype.$CommercialBreakCallToActionButton1=function(){'use strict';switch(this.props.callToActionType){case c('CallToActionTypes').SIGN_UP:return i._("Sign Up");case c('CallToActionTypes').LEARN_MORE:default:return i._("Learn More");}};function l(){'use strict';j.apply(this,arguments);}f.exports=l;}),null);
__d('CommercialBreakContextCard.react',['cx','CommercialBreakCallToActionAttachment.react','CommercialBreakCallToActionButton.react','Image.react','React'],(function a(b,c,d,e,f,g,h){var i,j;i=babelHelpers.inherits(k,c('React').Component);j=i&&i.prototype;k.prototype.render=function(){'use strict';return c('React').createElement('div',{className:"_1y8j"},c('React').createElement('div',{className:"_1y8k"},c('React').createElement(c('Image.react'),{height:'28',src:this.props.profilePicURI})),c('React').createElement('div',{className:"_1y8n"},c('React').createElement('div',{className:"_1y8v"},c('React').createElement('div',{className:"_1y8w"},this.props.profileName),c('React').createElement('div',{className:"_1y8x"},c('React').createElement('fbtc',null,'Sponsored')))),this.$CommercialBreakContextCard1(),this.$CommercialBreakContextCard2());};k.prototype.$CommercialBreakContextCard1=function(){'use strict';var l=this.props.callToAction;if(!this.props.config.isDREnabled||!l)return null;return c('React').createElement(c('CommercialBreakCallToActionButton.react'),{buttonLocation:this.props.config.ctaButtonLocation,callToActionType:l.ctaType,link:l.link});};k.prototype.$CommercialBreakContextCard2=function(){'use strict';var l=this.props.callToAction;if(!this.props.config.isDREnabled||!l)return null;return c('React').createElement(c('CommercialBreakCallToActionAttachment.react'),{link:l.link,linkTitle:l.linkTitle,linkCaption:l.linkCaption});};function k(){'use strict';i.apply(this,arguments);}f.exports=k;}),null);
__d('CommercialBreakHostStoryComponentType',[],(function a(b,c,d,e,f,g){var h={POP_OVER_MENU:'POP_OVER_MENU',HOST_STORY_HEADER:'HOST_STORY_HEADER'};f.exports=h;}),null);
__d("CommercialBreakState",[],(function a(b,c,d,e,f,g){f.exports=Object.freeze({INIT:"INIT",PREPARE:"PREPARE",AD_REQUEST_SENT:"AD_REQUEST_SENT",CB_SCHEDULED:"CB_SCHEDULED",ENTERING_TRANSITION:"ENTERING_TRANSITION",PLAY_AD_COUNTDOWN:"PLAY_AD_COUNTDOWN",LEAVING_TRANSITION:"LEAVING_TRANSITION",VOD_BREAK_WITH_NO_VIDEO_AD:"VOD_BREAK_WITH_NO_VIDEO_AD"});}),null);
__d('StoryComponentVideoPlayerControllerRegistry',['CommercialBreakExperiments','CommercialBreakHostStoryComponentType','EventEmitter','Map'],(function a(b,c,d,e,f,g){'use strict';var h=new (c('EventEmitter'))(),i=new (c('Map'))(),j=new (c('Map'))(),k=new (c('Map'))();function l(p){var q=p,r=[];while(q){r.unshift(q);q=q.parentElement;}return r;}function m(p,q){if(p===null)return null;var r=l(p),s=null,t=null;q.forEach(function(u){var v=u[0],w=u[1],x=l(v);for(var y=0;y<r.length;++y)if(r[y]!==x[y]){if(t===null||y>t){t=y;s=w;}break;}});return s;}var n={registerVideoPlayerController:function p(q,r){var s=q.getVideoID(),t=i.get(s);if(t){t.push(q);}else{t=[q];i.set(s,t);}var u=null;if(r===c('CommercialBreakHostStoryComponentType').POP_OVER_MENU){u=this.findPopoverAsyncMenuForVideoPlayerController(q);}else if(r===c('CommercialBreakHostStoryComponentType').HOST_STORY_HEADER)u=this.findHostStoryControllerForVideoPlayerController(q);if(!u)return;h.emit(u.getInstanceID()+'/register',q);},registerHostStoryController:function p(q,r,s){var t=k.get(r);if(t){t.push(q);}else{t=[q];k.set(r,t);}this._informStoryComponentRegister(q.getContainerElement(),q.getInstanceID(),r,s);},registerPopoverAsyncMenu:function p(q,r){var s=r.host_video_id;if(!s||!c('CommercialBreakExperiments').instreamAdsEnableNFX)return;var t=new o(q,r),u=t.getInstanceID(),v=j.get(s);if(!v){v=[];j.set(s,v);}v.push(t);this._informStoryComponentRegister(t.getTriggerElem(),u,s,t.registerVideoPlayerController.bind(t));},_informStoryComponentRegister:function p(q,r,s,t){h.addListener(r+'/register',t);var u=this.findVideoPlayerControllerForElement(q,s);if(!u)return;h.emit(r+'/register',u);},findVideoPlayerControllerForElement:function p(q,r){var s=i.get(r);if(!s)return null;return m(q,s.map(function(t){return [t.getRootNode(),t];}));},findPopoverAsyncMenuForVideoPlayerController:function p(q){var r=j.get(q.getVideoID());if(!r)return null;return m(q.getRootNode(),r.map(function(s){return [s.getTriggerElem(),s];}));},findHostStoryControllerForVideoPlayerController:function p(q){var r=k.get(q.getVideoID());if(!r)return null;return m(q.getRootNode(),r.map(function(s){return [s.getContainerElement(),s];}));}};function o(p,q){this._menu=p;this._originalEndpoint=this._menu._endpoint;this._additionalData=q;}o.prototype.registerVideoPlayerController=function(p){p.addListener('commercialBreak/updateOptionMenuURI',function(q){this._updateEndpoint(q);}.bind(this));p.addListener('commercialBreak/recoverOptionMenuURI',function(){return this._updateEndpoint(this._originalEndpoint);}.bind(this));};o.prototype._updateEndpoint=function(p){var q=this._menu;q.setMenu(q._loadingMenu);q._setFocus(q._loadingMenu);q._endpoint=p;if(q._fetched){q._fetched=false;q.fetchMenu();}};o.prototype.getInstanceID=function(){return this._menu._instanceId.toString();};o.prototype.getTriggerElem=function(){return this._menu.getTriggerElem();};o.prototype.getOptionsButtonID=function(){return this._additionalData.options_button_id||'';};f.exports=n;}),null);
__d('CommercialBreakHostStoryController',['csx','cx','CommercialBreakContextCard.react','CommercialBreakState','CSS','DataStore','DOM','DOMQuery','React','ReactDOM','StoryComponentVideoPlayerControllerRegistry','VideoPlayerLoggerSource'],(function a(b,c,d,e,f,g,h,i){function j(k,l,m,n){'use strict';this.$CommercialBreakHostStoryController1=null;this.$CommercialBreakHostStoryController6=null;this.$CommercialBreakHostStoryController7=null;this.$CommercialBreakHostStoryController8=null;this.$CommercialBreakHostStoryController9=null;this.$CommercialBreakHostStoryController2=m;this.$CommercialBreakHostStoryController4=k;this.$CommercialBreakHostStoryController3=l;if(n)this.$CommercialBreakHostStoryController15=n.toString();var o=c('DOMQuery').scry(l,".uiLikePageButton");if(o.length!==0)this.$CommercialBreakHostStoryController1=o[0];var p=c('DOMQuery').scry(l,"._5pbx");if(p.length!==0)this.$CommercialBreakHostStoryController6=p[0];var q=c('DOMQuery').scry(l,"._2ezg");if(q.length!=0)this.$CommercialBreakHostStoryController7=q[0];var r=c('DOMQuery').scry(l,"._5pcm");if(r.length!=0)this.$CommercialBreakHostStoryController8=r[0];var s=c('DOMQuery').scry(l,"._5pbz");if(s.length!=0){var t=s[0];this.$CommercialBreakHostStoryController9=c('DOMQuery').scry(t,"._1dwg");}c('StoryComponentVideoPlayerControllerRegistry').registerHostStoryController(this,this.$CommercialBreakHostStoryController15,this.$CommercialBreakHostStoryController16.bind(this));}j.prototype.getContainerElement=function(){'use strict';return this.$CommercialBreakHostStoryController3;};j.prototype.getInstanceID=function(){'use strict';return this.$CommercialBreakHostStoryController2;};j.prototype.$CommercialBreakHostStoryController16=function(k){'use strict';this.$CommercialBreakHostStoryController11=k;this.$CommercialBreakHostStoryController5=this.$CommercialBreakHostStoryController11.getRootNode();this.$CommercialBreakHostStoryController11.addListener('commercialBreak/hideUFI',this.$CommercialBreakHostStoryController17.bind(this));this.$CommercialBreakHostStoryController11.addListener('commercialBreak/showUFI',function(){if(this.$CommercialBreakHostStoryController10)c('DOM').remove(this.$CommercialBreakHostStoryController10);}.bind(this));this.$CommercialBreakHostStoryController11.addListener('TahoeController/exitTahoe',this.$CommercialBreakHostStoryController18.bind(this));this.$CommercialBreakHostStoryController14=k.addListener('optionsChange',function(){return this.$CommercialBreakHostStoryController19();}.bind(this));this.$CommercialBreakHostStoryController19();};j.prototype.$CommercialBreakHostStoryController19=function(){'use strict';this.$CommercialBreakHostStoryController13=this.$CommercialBreakHostStoryController11.getOption('VideoWithCommercialBreak','controller');this.$CommercialBreakHostStoryController12=this.$CommercialBreakHostStoryController11.getOption('VideoWithInstreamVideo','controller');if(this.$CommercialBreakHostStoryController13){this.$CommercialBreakHostStoryController14.remove();this.$CommercialBreakHostStoryController13.addListener('commercialBreak/stateChange',function(k){return this.$CommercialBreakHostStoryController20(k.state);}.bind(this));}};j.prototype.$CommercialBreakHostStoryController20=function(k){'use strict';if(k===c('CommercialBreakState').PLAY_AD_COUNTDOWN){this.$CommercialBreakHostStoryController21();}else this.$CommercialBreakHostStoryController22();};j.prototype.$CommercialBreakHostStoryController18=function(){'use strict';if(this.$CommercialBreakHostStoryController13)if(this.$CommercialBreakHostStoryController13.getIsCommercialBreakOngoing())this.$CommercialBreakHostStoryController17();};j.prototype.$CommercialBreakHostStoryController17=function(){'use strict';var k=this.$CommercialBreakHostStoryController12&&this.$CommercialBreakHostStoryController12.getConfig();if(k&&!k.useNewContextCard)return;if(!this.$CommercialBreakHostStoryController23())return;var l=this.$CommercialBreakHostStoryController12&&this.$CommercialBreakHostStoryController12.getAdController();if(k&&!k.isBroadcast&&l){var m=JSON.parse(c('DataStore').get(l.getRootNode(),'store'));if(m&&Object.prototype.hasOwnProperty.call(m,'profileName')&&Object.prototype.hasOwnProperty.call(m,'profilePicURI')&&this.$CommercialBreakHostStoryController5){var n=this.$CommercialBreakHostStoryController5&&this.$CommercialBreakHostStoryController5.parentNode;if(n){var o=c('DOM').scry(n,"._16bp");if(o.length!=0)return;}this.$CommercialBreakHostStoryController10=c('DOM').create('div',{className:"_16bp"});c('DOM').insertAfter(this.$CommercialBreakHostStoryController5,this.$CommercialBreakHostStoryController10);var p=this.$CommercialBreakHostStoryController13&&this.$CommercialBreakHostStoryController13.getCallToAction(),q=p&&p.adVideoID&&p.adVideoID.toString();if(l.getVideoID()!==q)p=null;c('ReactDOM').render(c('React').createElement(c('CommercialBreakContextCard.react'),{callToAction:p,config:k,profileName:m.profileName,profilePicURI:m.profilePicURI}),this.$CommercialBreakHostStoryController10);}}};j.prototype.$CommercialBreakHostStoryController23=function(){'use strict';return this.$CommercialBreakHostStoryController24()||this.$CommercialBreakHostStoryController25();};j.prototype.$CommercialBreakHostStoryController25=function(){'use strict';if(this.$CommercialBreakHostStoryController11)return this.$CommercialBreakHostStoryController11.getSource()===c('VideoPlayerLoggerSource').PERMALINK;return false;};j.prototype.$CommercialBreakHostStoryController24=function(){'use strict';if(this.$CommercialBreakHostStoryController11)return this.$CommercialBreakHostStoryController11.getSource()===c('VideoPlayerLoggerSource').INLINE;return false;};j.prototype.$CommercialBreakHostStoryController21=function(){'use strict';if(this.$CommercialBreakHostStoryController1)c('CSS').addClass(this.$CommercialBreakHostStoryController1,"_3fcl");if(this.$CommercialBreakHostStoryController4)c('CSS').addClass(this.$CommercialBreakHostStoryController4,"_3fcl");if(this.$CommercialBreakHostStoryController6)c('CSS').addClass(this.$CommercialBreakHostStoryController6,"_3fcl");if(this.$CommercialBreakHostStoryController7)c('CSS').addClass(this.$CommercialBreakHostStoryController7,"_3fcl");if(this.$CommercialBreakHostStoryController8)c('CSS').addClass(this.$CommercialBreakHostStoryController8,"_3fcl");if(this.$CommercialBreakHostStoryController9)this.$CommercialBreakHostStoryController9.map(function(k){c('CSS').addClass(k,"_3fcl");});};j.prototype.$CommercialBreakHostStoryController22=function(){'use strict';if(this.$CommercialBreakHostStoryController1)c('CSS').removeClass(this.$CommercialBreakHostStoryController1,"_3fcl");if(this.$CommercialBreakHostStoryController4)c('CSS').removeClass(this.$CommercialBreakHostStoryController4,"_3fcl");if(this.$CommercialBreakHostStoryController6)c('CSS').removeClass(this.$CommercialBreakHostStoryController6,"_3fcl");if(this.$CommercialBreakHostStoryController7)c('CSS').removeClass(this.$CommercialBreakHostStoryController7,"_3fcl");if(this.$CommercialBreakHostStoryController8)c('CSS').removeClass(this.$CommercialBreakHostStoryController8,"_3fcl");if(this.$CommercialBreakHostStoryController9)this.$CommercialBreakHostStoryController9.map(function(k){c('CSS').removeClass(k,"_3fcl");});};f.exports=j;}),null);